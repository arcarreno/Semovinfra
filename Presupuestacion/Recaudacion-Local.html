<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recaudación Local - Transparencia Presupuestaria Puebla</title>

    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <link rel="stylesheet" href="../styles.css">

    <style>
        body {
            font-family: 'poppins', sans-serif;
            color: var(--gris-2);
        }

        .featured-box {
            background-color: var(--verde-3);
            color: var(--blanco);
            border-radius: 20px;
            padding: 40px;
            display: flex;
            flex-direction: column;
            /* Móvil: columna */
            align-items: center;
            gap: 30px;
            margin-bottom: 60px;
            margin-left: auto;
            margin-right: auto;
            border: 3px solid var(--dorado-8);
            box-shadow: 0 10px 30px rgba(125, 36, 71, 0.2);
            max-width: 1200px;
        }

        /* En pantallas grandes, cambia a fila */
        @media (min-width: 768px) {
            .featured-box {
                flex-direction: row;
                text-align: left;
            }
        }

        .featured-icon {
            font-size: 3rem;
            color: var(--crema-4);
        }

        .featured-content h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--crema-4);
        }


        /* --- NAVEGACIÓN UNIFICADA --- */
        .top-bar {
            background-color: var(--guinda-1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.85rem;
        }

        .main-nav {
            background-color: #fff;
            border-bottom: 4px solid var(--dorado-8);
        }

        .nav-link {
            color: var(--gris-2) !important;
            font-weight: 600;
            font-size: 0.8rem;
            padding: 10px 15px !important;
            transition: all 0.3s;
        }

        .nav-link:hover,
        .dropdown-item:hover {
            color: var(--guinda-1) !important;
            background-color: rgba(219, 198, 179, 0.2);
        }

        .dropdown-menu {
            border-top: 4px solid var(--guinda-1);
            border-radius: 0 0 8px 8px;
        }

        /* --- CORRECCIÓN MENÚ MÓVIL --- */
        @media (max-width: 1199.98px) {
            .navbar-collapse {
                background-color: var(--guinda-1);
                padding: 15px;
                margin-top: 10px;
                border-radius: 8px;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            }

            .navbar-collapse .nav-link {
                color: #ffffff !important;
                border-radius: 5px;
            }

            .navbar-collapse .dropdown-menu {
                background-color: transparent;
                border: none;
                padding-left: 15px;
                margin-top: 0;
            }

            .navbar-collapse .dropdown-item {
                color: #ffffff !important;
                border-radius: 5px;
            }

            .navbar-collapse .nav-link:hover,
            .navbar-collapse .dropdown-item:hover {
                background-color: rgba(255, 255, 255, 0.1) !important;
                color: var(--dorado-8) !important;
            }
        }

        /* --- ESTILOS DE RECAUDACIÓN --- */
        .page-header {
            background-color: var(--guinda-1);
            background-image: url('../models/images/banner_home.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            color: var(--blanco);
            padding: 100px 0 60px;
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 5px solid var(--dorado-8);
            position: relative;
        }


        .page-header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 2px 2px 0px var(--verde-3);
        }

        /* --- RESPONSIVE PAGE HEADER --- */
        @media (max-width: 768px) {
            .page-header {
                padding: 60px 0 35px;
                margin-bottom: 25px;
                background-image: url('../models/images/banner_home.png');
            }

            .page-header h1 {
                font-size: 1.8rem;
                letter-spacing: 1px;
                word-break: break-word;
                padding: 0 15px;
            }

            .page-header p {
                font-size: 0.9rem !important;
                padding: 0 15px;
                line-height: 1.5;
            }
        }

        @media (max-width: 480px) {
            .page-header {
                padding: 45px 0 25px;
                margin-bottom: 15px;
                border-bottom-width: 3px;
            }

            .page-header h1 {
                font-size: 1.3rem;
                letter-spacing: 0;
                margin-bottom: 10px;
            }

            .page-header p {
                font-size: 0.8rem !important;
            }
        }

        .section-title {
            color: var(--guinda-1);
            font-weight: 700;
            text-align: center;
            margin-bottom: 30px;
        }

        /* --- CONTENEDOR DEL MAPA KML --- */
        .map-wrapper {
            background: var(--blanco);
            border: 1px solid var(--crema-4);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            margin-bottom: 50px;
        }

        #map-container {
            width: 100%;
            height: 600px;
            /* Altura del mapa */
            background-color: #e9ecef;
            /* Color de fondo mientras carga */
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            border: 2px solid var(--dorado-8);
        }

        /* Placeholder visual para el mapa (puedes quitar esto cuando insertes tu mapa real) */
        .map-placeholder-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: var(--gris-2);
        }

        /* --- BASES DE DATOS --- */
        .database-card {

            background: var(--blanco);
            border-left: 5px solid var(--verde-3);
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            transition: transform 0.3s;
            text-align: center;
        }

        .database-card:hover {
            transform: translateY(-5px);
            border-left-color: var(--guinda-1);
        }

        .btn-download {
            background-color: var(--guinda-1);
            color: white;
            padding: 10px 25px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            transition: background 0.3s;
        }

        .btn-download:hover {
            background-color: var(--verde-3);
            color: white;
        }

        /* Preloader */
        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--guinda-1);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .preloader.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loader-img {
            width: 150px;
            height: auto;
            animation: latido 2s infinite ease-in-out;
        }

        @keyframes latido {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* ========== RESPONSIVE STYLES ========== */

        /* Tablet y pantallas medianas (max-width: 1199.98px) */
        @media (max-width: 1199.98px) {
            .navbar-collapse {
                background-color: var(--guinda-1);
                padding: 15px;
                margin-top: 10px;
                border-radius: 8px;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            }

            .navbar-collapse .nav-link {
                color: #ffffff !important;
                border-radius: 5px;
                padding: 10px 15px;
            }

            .navbar-collapse .dropdown-menu {
                background-color: transparent;
                border: none;
                padding-left: 15px;
                margin-top: 0;
            }

            .navbar-collapse .dropdown-item {
                color: #ffffff !important;
                border-radius: 5px;
                padding: 8px 15px;
            }

            .navbar-collapse .nav-link:hover,
            .navbar-collapse .dropdown-item:hover {
                background-color: rgba(255, 255, 255, 0.1) !important;
                color: var(--dorado-8) !important;
            }
        }

        /* Tablet (max-width: 991px) */
        @media (max-width: 991px) {
            .page-header h1 {
                font-size: 2.5rem;
            }

            .page-header p {
                font-size: 1.1rem !important;
            }

            .featured-box {
                padding: 30px 20px;
                gap: 20px;
            }

            #map-container {
                height: 450px;
            }
        }

        /* Móvil grande (max-width: 768px) */
        @media (max-width: 768px) {
            .page-header {
                padding: 60px 20px 40px;
            }

            .page-header h1 {
                font-size: 1.8rem;
                letter-spacing: 1px;
            }

            .page-header p {
                font-size: 1rem !important;
                padding: 0 15px;
            }

            .featured-box {
                flex-direction: column;
                text-align: center;
                padding: 25px 15px;
                margin-bottom: 40px;
                margin-left: 15px;
                margin-right: 15px;
            }

            .featured-icon {
                width: 70px;
                height: 70px;
                font-size: 2rem;
            }

            #map-container {
                height: 400px;
            }

            .map-wrapper {
                padding: 15px;
            }

            .database-card {
                padding: 20px;
            }

            /* Centrar botones de descarga en móvil */
            .map-wrapper .text-end {
                text-align: center !important;
            }

            .btn-download {
                display: inline-block;
                margin: 5px;
            }
        }

        /* Móvil pequeño (max-width: 480px) */
        @media (max-width: 480px) {
            .page-header {
                padding: 40px 15px 30px;
            }

            .page-header h1 {
                font-size: 1.5rem;
            }

            .page-header p {
                font-size: 0.9rem !important;
                padding: 0 10px;
                line-height: 1.4;
            }

            .featured-box {
                padding: 20px 10px;
                gap: 15px;
            }

            .featured-box h3 {
                font-size: 1.2rem;
            }

            .featured-box p {
                font-size: 0.9rem;
            }

            .featured-icon {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }

            #map-container {
                height: 350px;
            }

            .section-title {
                font-size: 1.3rem;
            }

            .database-card {
                padding: 15px;
            }

            .btn-download {
                padding: 8px 20px;
                font-size: 0.9rem;
            }
        }

        /* Móvil extra pequeño (max-width: 360px) */
        @media (max-width: 360px) {
            .page-header h1 {
                font-size: 1.3rem;
            }

            .page-header p {
                font-size: 0.85rem !important;
            }

            .featured-box h3 {
                font-size: 1.1rem;
            }

            #map-container {
                height: 300px;
            }
        }
    </style>
</head>

<body>

    <div class="preloader" id="preloader">
        <img src="../models/images/semo.png" alt="Cargando..." class="loader-img">
    </div>

    <div class="top-bar">
        <div class="container d-flex justify-content-between align-items-center py-2">
            <div class="top-left">
                <a href="../Portal.html" class="text-white text-decoration-none small">
                    <i class="fas fa-landmark me-2"></i> Gobierno de Puebla
                </a>
            </div>
            <div class="top-right d-flex gap-3">
                <a href="#" class="text-white text-decoration-none small"><i class="fas fa-file-alt"></i> Trámites</a>
                <a href="#" class="text-white text-decoration-none small"><i class="fas fa-building"></i> Gobierno</a>
                <a href="#" class="text-white text-decoration-none small"><i class="fas fa-search"></i> Buscar</a>
            </div>
        </div>
    </div>

    <nav class="navbar navbar-expand-xl sticky-top main-nav shadow-sm p-0">
        <div class="container nav-content py-2">

            <a class="navbar-brand d-flex align-items-center" href="../Portal.html">
                <img src="../models/images/image.png" alt="Gobierno de Puebla" class="logo-img me-3"
                    style="height: 50px;">
                <div class="d-none d-lg-block lh-1">
                    <span class="d-block fw-bold text-guinda"
                        style="color: var(--guinda-1); letter-spacing: 1px;">TRANSPARENCIA</span>
                    <span class="d-block fw-light text-muted">PRESUPUESTARIA</span>
                    <span class="d-block text-muted" style="font-size: 10px;">Gobierno del Estado de Puebla</span>
                </div>
            </a>

            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false"
                aria-label="Navegación">
                <span class="fas fa-bars fs-2" style="color: var(--guinda-1);"></span>
            </button>

            <div class="collapse navbar-collapse justify-content-end" id="navbarContent">
                <ul class="navbar-nav align-items-center text-uppercase fw-bold">
                    <li class="nav-item"><a href="../Presupuestacion/Ciclo-Presupuestario.html" class="nav-link"><i
                                class="fas fa-sync-alt me-1"></i> CICLO</a></li>
                    <li class="nav-item"><a href="../Presupuestacion/Planeacion.html" class="nav-link"><i
                                class="fas fa-chart-line me-1"></i> PLANEACIÓN</a></li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false"><i class="fas fa-arrow-down me-1"></i> INGRESO</a>
                        <ul class="dropdown-menu shadow">
                            <li><a class="dropdown-item py-2" href="../Presupuestacion/Ingresos-Federales.html"><i
                                        class="fas fa-landmark me-2"></i> Ingresos Federales</a></li>
                            <li><a class="dropdown-item py-2" href="../Presupuestacion/Recaudacion-Local.html"><i
                                        class="fas fa-map-marker-alt me-2"></i> Recaudación Local</a></li>
                        </ul>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false"><i class="fas fa-arrow-up me-1"></i> GASTO</a>
                        <ul class="dropdown-menu shadow">
                            <li><a class="dropdown-item py-2" href="../Presupuestacion/Programas.html"><i
                                        class="fas fa-clipboard-list me-2"></i> Programas</a></li>
                            <li><a class="dropdown-item py-2" href="../Presupuestacion/Obra-Publica-Abierta.html"><i
                                        class="fas fa-hard-hat me-2"></i> Obra Pública</a></li>
                            <li><a class="dropdown-item py-2" href="../Presupuestacion/Entidades-Federativas.html"><i
                                        class="fas fa-university me-2"></i> Entidades Federativas</a></li>
                            <li><a class="dropdown-item py-2" href="../Presupuestacion/Ramo23.html"><i
                                        class="fas fa-chart-pie me-2"></i> Ramo 23</a></li>
                        </ul>
                    </li>

                    <li class="nav-item"><a href="../Presupuestacion/Sistema-Evaluacion-Desempeno.html"
                            class="nav-link"><i class="fas fa-chart-bar me-1"></i> EVALUACIÓN</a></li>
                    <li class="nav-item"><a href="../Presupuestacion/Datos-Abiertos.html" class="nav-link"><i
                                class="fas fa-database me-1"></i> DATOS</a></li>
                    <li class="nav-item"><a href="../Presupuestacion/Capacitacion.html" class="nav-link"><i
                                class="fas fa-graduation-cap me-1"></i> CAPACITACIÓN</a></li>
                    <li class="nav-item ms-lg-2"><button class="btn border-0 text-secondary fs-5"><i
                                class="fas fa-search"></i></button></li>
                </ul>
            </div>
        </div>
    </nav>

    <header class="page-header">
        <div class="container">
            <h1>Recaudación Local</h1>
            <p style="font-size: 1.2rem; max-width: 900px; margin: 0 auto;">
                Esta sección contiene la información de los recursos obtenidos por los estados por el cobro de
                <strong>impuestos y derechos</strong>, así como los obtenidos por los municipios por conceptos de
                <strong>impuesto predial</strong> y derechos por el suministro de agua.
            </p>
        </div>
    </header>

    <div class="featured-box mt-5">
        <div class="featured-icon">
            <i class="fas fa-info-circle"></i>
        </div>
        <div class="featured-content" style="flex: 1;">
            <h3>¿Cuánto recaudaron los estados y municipios?</h3>
            <p style="opacity: 0.9;">
                Los gobiernos locales obtienen ingresos de distintas fuentes, entre ellas, las transferencias del
                Gobierno Federal y otros que generan por conceptos propios como impuestos, aprovechamientos, productos y
                contribuciones de mejoras. La información que se muestra a continuación contempla la recaudación de
                impuestos y derechos a nivel estatal y del impuesto predial y derechos por el suministro de agua a nivel
                municipal , sin considerar otros recursos propios.
            </p>
            <p>Selecciona el concepto de ingreso que quieras visualizar en el mapa. Si deseas obtener información de
                algún estado, municipio o ciclo en particular, utiliza los filtros correspondientes.</p>
        </div>
    </div>

    <div class="container" style="margin-bottom: 80px;">
        <div class="map-wrapper">
            <div id="map-container"></div>

            <div class="mt-3 text-end">
                <a href="#" class="btn-download me-2"><i class="fas fa-download me-2"></i> Descargar Mapa</a>
                <a href="#" class="btn-download"><i class="fas fa-file-excel me-2"></i> Descargar Datos</a>
            </div>
        </div>

        <div class="mt-5" style="text-align: center; justify-content: center;">
            <h2 class="section-title">Bases de Datos Abiertos</h2>

            <div class="database-card">
                <div>
                    <h3 class="fw-bold m-0" style="color: var(--guinda-1);">Recaudación Local 2025</h3>
                    <p class="m-0 text-muted">Desglose detallado por entidad federativa y municipio.</p>
                </div>
                <div>
                    <a href="#" class="btn-download me-2"><i class="fas fa-download me-2"></i> CSV</a>
                    <a href="#" class="btn-download"><i class="fas fa-file-excel me-2"></i> XLS</a>
                </div>
            </div>
        </div>

    </div>

    <footer class="footer-section bg-secondary text-white py-5" style="background-color: var(--verde-3) !important;">
        <div class="container">
            <div class="row gy-4">
                <div class="col-lg-4">
                    <div class="mb-3">
                        <img src="../models/images/image.png" alt="Gobierno de Puebla"
                            style="filter: brightness(0) invert(1); max-width: 180px;">
                    </div>
                    <div class="lh-1">
                        <h4 class="h6 fw-bold text-crema" style="color: var(--crema-4);">TRANSPARENCIA PRESUPUESTARIA
                        </h4>
                        <p class="small opacity-75">Gobierno del Estado de Puebla</p>
                    </div>
                </div>

                <div class="col-6 col-lg-2">
                    <h5 class="h6 fw-bold mb-3" style="color: var(--crema-4);">Transparencia</h5>
                    <ul class="list-unstyled small">
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none opacity-75">Portal de
                                Transparencia</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none opacity-75">Información
                                Pública</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none opacity-75">Protección de
                                Datos</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none opacity-75">Avisos de
                                Privacidad</a></li>
                    </ul>
                </div>

                <div class="col-6 col-lg-2">
                    <h5 class="h6 fw-bold mb-3" style="color: var(--crema-4);">Recursos</h5>
                    <ul class="list-unstyled small">
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none opacity-75">Documentos
                                Oficiales</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none opacity-75">Leyes y
                                Reglamentos</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none opacity-75">Estadísticas</a>
                        </li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none opacity-75">API
                                Documentación</a></li>
                    </ul>
                </div>

                <div class="col-lg-4 text-lg-end">
                    <div class="mb-4">
                        <h5 class="h6 fw-bold mb-3" style="color: var(--crema-4);">Contacto</h5>
                        <ul class="list-unstyled small">
                            <li class="mb-2"><i class="fas fa-phone me-2"></i> (222) 123 4567</li>
                            <li class="mb-2"><i class="fas fa-envelope me-2"></i> transparencia@puebla.gob.mx</li>
                            <li class="mb-2"><i class="fas fa-map-marker-alt me-2"></i> Puebla, México</li>
                        </ul>
                    </div>
                    <div>
                        <h5 class="h6 fw-bold mb-3" style="color: var(--crema-4);">Síguenos</h5>
                        <div class="d-flex justify-content-lg-end gap-3">
                            <a href="#" class="text-white"><i class="fab fa-facebook-f"></i></a>
                            <a href="#" class="text-white"><i class="fab fa-twitter"></i></a>
                            <a href="#" class="text-white"><i class="fab fa-youtube"></i></a>
                            <a href="#" class="text-white"><i class="fab fa-instagram"></i></a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="border-top border-secondary mt-4 pt-4 text-center small opacity-50">
                <p class="mb-1">&copy; 2026 Gobierno del Estado de Puebla. Todos los derechos reservados.</p>
                <p>Portal de Transparencia Presupuestaria | Versión 2.0</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../script.js"></script>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js'></script>

    <script>
        // A. Quitar preloader
        window.addEventListener('load', function () {
            const preloader = document.getElementById('preloader');
            if (preloader) {
                preloader.style.display = 'none';
            }
        });

        // B. Inicializar el Mapa de OpenStreetMap
        // Coordenadas de Puebla: [19.0414, -98.2063]
        var map = L.map('map-container').setView([19.0414, -98.2063], 10); // El 10 es el nivel de zoom

        // C. Agregar la capa visual (los dibujos del mapa)
        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);

        // D. Cargar tu archivo KML
        // Asegúrate de que la ruta sea correcta. Si tu archivo está en models/Mapas/ se pone así:
        var kmlLayer = omnivore.kml('../models/Mapas/LIMITECOMPLE.kml')
            .on('ready', function () {
                // Cuando termine de cargar, ajusta el mapa para ver todo el KML
                map.fitBounds(kmlLayer.getBounds());
            })
            .on('error', function (e) {
                console.error("Error cargando el KML. Asegúrate de estar usando un servidor local (localhost) y no abriendo el archivo directamente.", e);
            })
            .addTo(map);
    </script>
</body>

</html>